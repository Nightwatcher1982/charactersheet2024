# ğŸ”§ æŠ€èƒ½é€‰æ‹©é—®é¢˜ä¿®å¤

## âœ… é—®é¢˜å·²ä¿®å¤

**é—®é¢˜**ï¼šæŠ€èƒ½çºµè§ˆæ˜¾ç¤º0ä¸ªæŠ€èƒ½ï¼Œæ²¡æœ‰é€‰æ‹©èŒä¸šæŠ€èƒ½å’ŒèƒŒæ™¯æŠ€èƒ½çš„æœºä¼š

**æ ¹æœ¬åŸå› **ï¼š
- v2.0 é‡æ„åï¼Œæ–°çš„æ­¥éª¤æµç¨‹ï¼ˆ`StepClassSimple`ã€`StepOriginBackground`ï¼‰åªé€‰æ‹©èŒä¸šå’ŒèƒŒæ™¯ï¼Œä½†**æ²¡æœ‰å®é™…é€‰æ‹©æŠ€èƒ½**
- `StepSkills` åªæ˜¯ä¸€ä¸ªå±•ç¤ºé¡µé¢ï¼Œä¸æä¾›é€‰æ‹©åŠŸèƒ½
- å·²æœ‰çš„ `ClassSkillSelector` å’Œ `BackgroundSkillSelector` ç»„ä»¶æ²¡æœ‰è¢«ä½¿ç”¨

---

## ğŸ› ï¸ ä¿®å¤å†…å®¹

### 1. ä¿®æ”¹ `StepSkills.tsx`

**ä»çº¯å±•ç¤ºé¡µé¢ â†’ å˜ä¸ºäº¤äº’å¼æŠ€èƒ½é€‰æ‹©æ­¥éª¤**

#### æ–°åŠŸèƒ½ï¼š

1. **è‡ªåŠ¨æ·»åŠ èƒŒæ™¯æŠ€èƒ½**
   - è¿›å…¥æ­¥éª¤æ—¶è‡ªåŠ¨ä»èƒŒæ™¯æ•°æ®è·å–æŠ€èƒ½
   - èƒŒæ™¯æŠ€èƒ½æ˜¯å›ºå®šçš„ï¼Œä¸éœ€è¦ç”¨æˆ·é€‰æ‹©
   - è‡ªåŠ¨æ·»åŠ åˆ°è§’è‰²çš„ `skills` æ•°ç»„

2. **èŒä¸šæŠ€èƒ½é€‰æ‹©**
   - æ£€æµ‹æ˜¯å¦å·²é€‰æ‹©è¶³å¤Ÿçš„èŒä¸šæŠ€èƒ½
   - å¦‚æœæ²¡æœ‰ï¼Œæ˜¾ç¤º `ClassSkillSelector` ç»„ä»¶
   - ç”¨æˆ·ä»èŒä¸šçš„å¯ç”¨æŠ€èƒ½ä¸­é€‰æ‹©è§„å®šæ•°é‡
   - é€‰æ‹©å®Œæˆåæ›´æ–°è§’è‰²çš„ `skills` æ•°ç»„

3. **æŠ€èƒ½æ€»è§ˆ**
   - é€‰æ‹©å®Œæˆåæ˜¾ç¤ºå®Œæ•´çš„æŠ€èƒ½æ€»è§ˆ
   - æŒ‰å±æ€§åˆ†ç»„æ˜¾ç¤ºæ‰€æœ‰æŠ€èƒ½
   - åŒºåˆ†èŒä¸šæŠ€èƒ½å’ŒèƒŒæ™¯æŠ€èƒ½

---

### 2. ä¿®å¤ `ClassSkillSelector.tsx`

**ä¿®å¤ useEffect æ— é™å¾ªç¯é—®é¢˜**
- ç§»é™¤ `onComplete` ä¾èµ–
- é¿å…æ— é™å¾ªç¯

---

## ğŸ¯ æ–°çš„æŠ€èƒ½é€‰æ‹©æµç¨‹

### æ­¥éª¤ 5ï¼šé€‰æ‹©æŠ€èƒ½

```
ç”¨æˆ·è¿›å…¥æ­¥éª¤ â†’ StepSkills ç»„ä»¶åŠ è½½

1. è‡ªåŠ¨æ·»åŠ èƒŒæ™¯æŠ€èƒ½ âœ“
   â†’ ä» BACKGROUNDS æ•°æ®è·å–
   â†’ æ·»åŠ åˆ° skills æ•°ç»„
   â†’ æ˜¾ç¤ºç»¿è‰²æç¤ºæ¡†

2. æ£€æŸ¥èŒä¸šæŠ€èƒ½
   â†’ å¦‚æœæœªé€‰å¤Ÿ â†’ æ˜¾ç¤º ClassSkillSelector
   â†’ ç”¨æˆ·é€‰æ‹©æŠ€èƒ½ï¼ˆå¦‚æˆ˜å£«é€‰æ‹©2ä¸ªï¼‰
   â†’ é€‰æ‹©å®Œæˆ âœ“

3. æ˜¾ç¤ºæŠ€èƒ½æ€»è§ˆ
   â†’ èŒä¸šæŠ€èƒ½ï¼šè“è‰²æ ‡ç­¾
   â†’ èƒŒæ™¯æŠ€èƒ½ï¼šç»¿è‰²æ ‡ç­¾
   â†’ å®Œæ•´æŠ€èƒ½åˆ—è¡¨ï¼ˆæŒ‰å±æ€§åˆ†ç»„ï¼‰
   â†’ æ˜¾ç¤ºç†Ÿç»ƒæ•°é‡
```

---

## ğŸ“Š ç¤ºä¾‹æµç¨‹

### æˆ˜å£« + å£«å…µèƒŒæ™¯

```
1. æ­¥éª¤ 2ï¼šèµ·æº
   â†’ é€‰æ‹©èƒŒæ™¯ï¼šå£«å…µ
   â†’ ï¼ˆä¸é€‰æŠ€èƒ½ï¼Œåªé€‰è£…å¤‡ï¼‰

2. æ­¥éª¤ 5ï¼šé€‰æ‹©æŠ€èƒ½
   
   ã€è‡ªåŠ¨æ·»åŠ ã€‘èƒŒæ™¯æŠ€èƒ½
   âœ“ è¿åŠ¨ï¼ˆAthleticsï¼‰
   âœ“ å¨å“ï¼ˆIntimidationï¼‰
   
   ã€ç”¨æˆ·é€‰æ‹©ã€‘èŒä¸šæŠ€èƒ½ï¼ˆ2ä¸ªï¼‰
   â†’ å¯é€‰ï¼šè¿åŠ¨ã€é©¯å…½ã€å†å²ã€æ´å¯Ÿã€
           å¨å“ã€å¯Ÿè§‰ã€ç”Ÿå­˜
   â†’ ç”¨æˆ·é€‰æ‹©ï¼šæ´å¯Ÿã€å¯Ÿè§‰
   âœ“ å®Œæˆ
   
   ã€æœ€ç»ˆç»“æœã€‘
   æ€»å…±4ä¸ªæŠ€èƒ½ç†Ÿç»ƒï¼š
   - è¿åŠ¨ï¼ˆèƒŒæ™¯ï¼‰
   - å¨å“ï¼ˆèƒŒæ™¯ï¼‰
   - æ´å¯Ÿï¼ˆèŒä¸šï¼‰
   - å¯Ÿè§‰ï¼ˆèŒä¸šï¼‰
```

---

## ğŸ§ª æµ‹è¯•æµç¨‹

### âš ï¸ ç¬¬ä¸€æ­¥ï¼šå¼ºåˆ¶åˆ·æ–°

**Mac**ï¼š`Cmd + Shift + R`  
**Windows**ï¼š`Ctrl + Shift + R`

---

### å®Œæ•´æµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰

```
1. è®¿é—® http://localhost:3000

2. åˆ›å»ºæ–°è§’è‰²
   
3. å¿«é€Ÿå®Œæˆå‰é¢æ­¥éª¤ï¼š
   
   æ­¥éª¤ 0ï¼šæ¬¢è¿
   â†’ ä¸‹ä¸€æ­¥
   
   æ­¥éª¤ 1ï¼šèŒä¸š
   â†’ é€‰æ‹©"æˆ˜å£«"
   â†’ ä¸‹ä¸€æ­¥ï¼ˆä¸éœ€è¦é€‰æŠ€èƒ½ï¼‰
   
   æ­¥éª¤ 2ï¼šèµ·æº
   â†’ 2.1 èƒŒæ™¯ï¼šé€‰æ‹©"å£«å…µ"ï¼Œè£…å¤‡é€‰"é€‰é¡¹A"
   â†’ 2.2 ç‰©ç§ï¼šé€‰æ‹©"äººç±»"ï¼Œå®Œæˆç‰¹æ€§å’Œä¸“é•¿
   â†’ 2.3 è¯­è¨€ï¼šé€‰æ‹©2ç§è¯­è¨€
   â†’ ä¸‹ä¸€æ­¥
   
   æ­¥éª¤ 3ï¼šå±æ€§
   â†’ å¿«é€Ÿåˆ†é…ï¼ˆéšæ„ï¼‰
   â†’ ä¸‹ä¸€æ­¥
   
   æ­¥éª¤ 4ï¼šé˜µè¥
   â†’ é€‰æ‹©ä¸€ä¸ªé˜µè¥
   â†’ ä¸‹ä¸€æ­¥

4. ğŸ¯ é‡ç‚¹æµ‹è¯•ï¼šæ­¥éª¤ 5 - é€‰æ‹©æŠ€èƒ½
   
   åº”è¯¥çœ‹åˆ°ï¼š
   
   âœ… ç»¿è‰²æ¡†ï¼šèƒŒæ™¯æŠ€èƒ½å·²è·å¾—
   â†’ æ˜¾ç¤º"å£«å…µ"èƒŒæ™¯
   â†’ æ˜¾ç¤º2ä¸ªæŠ€èƒ½ï¼šè¿åŠ¨ã€å¨å“
   
   âœ… èŒä¸šæŠ€èƒ½é€‰æ‹©å™¨
   â†’ æ ‡é¢˜ï¼š"æˆ˜å£«èŒä¸šæŠ€èƒ½é€‰æ‹©"
   â†’ è¯´æ˜ï¼š"é€‰æ‹©2é¡¹æŠ€èƒ½ç†Ÿç»ƒ"
   â†’ å¯é€‰æŠ€èƒ½åˆ—è¡¨ï¼ˆ7-8ä¸ªï¼‰
   
   â†’ ç‚¹å‡»"æ´å¯Ÿ" âœ“ ç«‹å³é€‰ä¸­
   â†’ ç‚¹å‡»"å¯Ÿè§‰" âœ“ ç«‹å³é€‰ä¸­
   
   â†’ çœ‹åˆ°ç»¿è‰²å®Œæˆæç¤ºï¼š
      "âœ“ æŠ€èƒ½é€‰æ‹©å®Œæˆï¼"
      "å·²é€‰æ‹©ï¼šå¯Ÿè§‰ã€æ´å¯Ÿ"
   
   â†’ ç‚¹å‡»"ä¸‹ä¸€æ­¥" âœ“ è¿›å…¥è£…å¤‡æ­¥éª¤

5. ç»§ç»­å®Œæˆæµç¨‹
   â†’ æ­¥éª¤ 6ï¼šè£…å¤‡ï¼ˆå¿«é€Ÿå®Œæˆï¼‰
   â†’ æ­¥éª¤ 7ï¼šå®¡æ ¸å®Œæˆ
   
   åœ¨å®¡æ ¸é¡µé¢æ£€æŸ¥ï¼š
   âœ… çœ‹åˆ°"æŠ€èƒ½ç†Ÿç»ƒæ€»æ•°ï¼š4"
   âœ… èŒä¸šæŠ€èƒ½ï¼šå¯Ÿè§‰ã€æ´å¯Ÿ
   âœ… èƒŒæ™¯æŠ€èƒ½ï¼šè¿åŠ¨ã€å¨å“

6. å¯¼å‡º PDF
   â†’ æŸ¥çœ‹ PDF åŒ…å«æ‰€æœ‰æŠ€èƒ½
```

---

## âœ… é¢„æœŸæ•ˆæœ

### æ­¥éª¤ 5ï¼šé€‰æ‹©æŠ€èƒ½

#### è¿›å…¥æ—¶ï¼š
- âœ… è‡ªåŠ¨æ˜¾ç¤ºèƒŒæ™¯æŠ€èƒ½ï¼ˆç»¿è‰²æ¡†ï¼‰
- âœ… æ˜¾ç¤ºèŒä¸šæŠ€èƒ½é€‰æ‹©å™¨
- âœ… è¯´æ˜éœ€è¦é€‰æ‹©çš„æ•°é‡

#### é€‰æ‹©è¿‡ç¨‹ï¼š
- âœ… ç‚¹å‡»æŠ€èƒ½ç«‹å³é€‰ä¸­ï¼ˆç»¿è‰²è¾¹æ¡†ï¼‰
- âœ… è¾¾åˆ°æ•°é‡åå…¶ä»–æŠ€èƒ½å˜ç°
- âœ… å¯ä»¥é‡æ–°é€‰æ‹©ï¼ˆç‚¹å‡»å–æ¶ˆé€‰ä¸­ï¼‰
- âœ… é€‰å¤Ÿåæ˜¾ç¤ºå®Œæˆæç¤º

#### å®Œæˆåï¼š
- âœ… å¯ä»¥ç‚¹å‡»"ä¸‹ä¸€æ­¥"
- âœ… è¿”å›è¯¥æ­¥éª¤æ—¶æ˜¾ç¤ºæŠ€èƒ½æ€»è§ˆ
- âœ… æ€»è§ˆä¸­èŒä¸š/èƒŒæ™¯æŠ€èƒ½åˆ†åˆ«æ ‡æ³¨

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### è‡ªåŠ¨æ·»åŠ èƒŒæ™¯æŠ€èƒ½

```typescript
// StepSkills.tsx (ç¬¬ 22-39 è¡Œ)

useEffect(() => {
  if (!skillsInitialized && backgroundData && backgroundData.skills) {
    const currentSkills = currentCharacter.skills || [];
    const backgroundSkills = backgroundData.skills;
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰èƒŒæ™¯æŠ€èƒ½
    const hasBackgroundSkills = backgroundSkills.some(
      skill => currentSkills.includes(skill)
    );
    
    if (!hasBackgroundSkills) {
      // æ·»åŠ èƒŒæ™¯æŠ€èƒ½
      updateCurrentCharacter({
        skills: [...currentSkills, ...backgroundSkills]
      });
    }
    
    setSkillsInitialized(true);
  }
  // eslint-disable-next-line react-hooks/exhaustive-deps
}, [skillsInitialized, backgroundData]);
```

**é€»è¾‘**ï¼š
1. åªåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥æ­¥éª¤æ—¶æ‰§è¡Œï¼ˆ`!skillsInitialized`ï¼‰
2. æ£€æŸ¥æ˜¯å¦å·²æœ‰èƒŒæ™¯æŠ€èƒ½
3. å¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ èƒŒæ™¯çš„æ‰€æœ‰æŠ€èƒ½
4. æ ‡è®°ä¸ºå·²åˆå§‹åŒ–

---

### æ£€æµ‹æ˜¯å¦éœ€è¦é€‰æ‹©èŒä¸šæŠ€èƒ½

```typescript
// StepSkills.tsx (ç¬¬ 45-46 è¡Œ)

const needsClassSkills = classData && 
                        classData.skillChoices && 
                        classSkills.length < classData.skillChoices;
```

**æ¡ä»¶**ï¼š
- æœ‰èŒä¸šæ•°æ®
- èŒä¸šéœ€è¦é€‰æ‹©æŠ€èƒ½ï¼ˆ`skillChoices > 0`ï¼‰
- å½“å‰èŒä¸šæŠ€èƒ½æ•°é‡ä¸è¶³

---

### å¤„ç†èŒä¸šæŠ€èƒ½é€‰æ‹©

```typescript
// StepSkills.tsx (ç¬¬ 49-57 è¡Œ)

const handleClassSkillsComplete = (selectedSkills: string[]) => {
  const currentSkills = currentCharacter.skills || [];
  // ç§»é™¤æ—§çš„èŒä¸šæŠ€èƒ½ï¼Œä¿ç•™èƒŒæ™¯æŠ€èƒ½
  const nonClassSkills = currentSkills.filter(
    skill => !classData?.availableSkills?.includes(skill)
  );
  // æ·»åŠ æ–°é€‰æ‹©çš„èŒä¸šæŠ€èƒ½
  updateCurrentCharacter({
    skills: [...nonClassSkills, ...selectedSkills]
  });
};
```

**é€»è¾‘**ï¼š
1. è·å–å½“å‰æ‰€æœ‰æŠ€èƒ½
2. è¿‡æ»¤æ‰æ—§çš„èŒä¸šæŠ€èƒ½ï¼ˆä¿ç•™èƒŒæ™¯æŠ€èƒ½ï¼‰
3. æ·»åŠ æ–°é€‰æ‹©çš„èŒä¸šæŠ€èƒ½
4. æ›´æ–°è§’è‰²æ•°æ®

---

## ğŸ“ å„èŒä¸šæŠ€èƒ½æ•°é‡

| èŒä¸š | æŠ€èƒ½é€‰æ‹©æ•° | å¯é€‰æŠ€èƒ½æ•° |
|------|----------|-----------|
| é‡è›®äºº | 2 | 6 |
| åŸæ¸¸è¯—äºº | 3 | å…¨éƒ¨18ä¸ª |
| ç‰§å¸ˆ | 2 | 5 |
| å¾·é²ä¼Š | 2 | 8 |
| æˆ˜å£« | 2 | 8 |
| æ­¦åƒ§ | 2 | 6 |
| åœ£æ­¦å£« | 2 | 6 |
| æ¸¸ä¾  | 3 | 8 |
| æ¸¸è¡è€… | 4 | 11 |
| æœ¯å£« | 2 | 6 |
| é‚ªæœ¯å¸ˆ | 2 | 7 |
| æ³•å¸ˆ | 2 | 6 |

---

## ğŸ” æ•°æ®æ¥æº

### èƒŒæ™¯æŠ€èƒ½

```typescript
// lib/dnd-data.ts - BACKGROUNDS æ•°ç»„

{
  id: 'soldier',
  name: 'å£«å…µ',
  skills: ['è¿åŠ¨', 'å¨å“'], // å›ºå®šæŠ€èƒ½
  toolProficiency: 'æ¸¸æˆå¥—è£…',
  abilityChoices: ['åŠ›é‡', 'æ•æ·', 'ä½“è´¨'],
  // ...
}
```

### èŒä¸šå¯é€‰æŠ€èƒ½

```typescript
// lib/dnd-data.ts - CLASSES æ•°ç»„

{
  name: 'æˆ˜å£«',
  nameEn: 'Fighter',
  skillChoices: 2, // éœ€è¦é€‰æ‹©çš„æ•°é‡
  availableSkills: [ // å¯é€‰æŠ€èƒ½åˆ—è¡¨
    'è¿åŠ¨', 'é©¯å…½', 'å†å²', 'æ´å¯Ÿ',
    'å¨å“', 'å¯Ÿè§‰', 'ç”Ÿå­˜'
  ],
  // ...
}
```

---

## ğŸ“‹ éªŒè¯æ¸…å•

å®Œæˆæµ‹è¯•åï¼Œç¡®è®¤ï¼š

### åŠŸèƒ½æµ‹è¯•
- [ ] âœ… è¿›å…¥æ­¥éª¤ 5 æ—¶è‡ªåŠ¨æ˜¾ç¤ºèƒŒæ™¯æŠ€èƒ½
- [ ] âœ… æ˜¾ç¤ºèŒä¸šæŠ€èƒ½é€‰æ‹©å™¨
- [ ] âœ… å¯ä»¥é€‰æ‹©æ­£ç¡®æ•°é‡çš„èŒä¸šæŠ€èƒ½
- [ ] âœ… é€‰æ‹©å®Œæˆåæ˜¾ç¤ºå®Œæˆæç¤º
- [ ] âœ… å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥
- [ ] âœ… è¿”å›æ­¥éª¤ 5 æ—¶æ˜¾ç¤ºæŠ€èƒ½æ€»è§ˆ
- [ ] âœ… æ€»è§ˆæ­£ç¡®æ˜¾ç¤ºèŒä¸š/èƒŒæ™¯æŠ€èƒ½
- [ ] âœ… å®¡æ ¸é¡µé¢æ˜¾ç¤ºæ­£ç¡®çš„æŠ€èƒ½æ•°é‡
- [ ] âœ… PDF åŒ…å«æ‰€æœ‰æŠ€èƒ½

### æŠ€æœ¯éªŒè¯
- [ ] âœ… æ§åˆ¶å°æ— é”™è¯¯
- [ ] âœ… æ— æ— é™å¾ªç¯
- [ ] âœ… é¡µé¢å“åº”è¿…é€Ÿ
- [ ] âœ… å¯ä»¥ä¿®æ”¹èŒä¸šæŠ€èƒ½é€‰æ‹©

---

## ğŸŠ ä¿®å¤å®Œæˆï¼

### ä¿®æ”¹çš„æ–‡ä»¶
1. `components/steps/StepSkills.tsx` - ä¸»è¦ä¿®æ”¹
2. `components/ClassSkillSelector.tsx` - useEffect ä¼˜åŒ–

### è§£å†³çš„é—®é¢˜
1. âœ… èƒŒæ™¯æŠ€èƒ½è‡ªåŠ¨æ·»åŠ 
2. âœ… èŒä¸šæŠ€èƒ½å¯ä»¥é€‰æ‹©
3. âœ… æŠ€èƒ½æ€»è§ˆæ­£ç¡®æ˜¾ç¤º
4. âœ… æ— é™å¾ªç¯é—®é¢˜

### ç°åœ¨å¯ä»¥ï¼š
- âœ… æ­£å¸¸é€‰æ‹©èŒä¸šæŠ€èƒ½
- âœ… è‡ªåŠ¨è·å¾—èƒŒæ™¯æŠ€èƒ½
- âœ… æŸ¥çœ‹å®Œæ•´æŠ€èƒ½æ€»è§ˆ
- âœ… å¯¼å‡ºåŒ…å«æŠ€èƒ½çš„ PDF

---

## ğŸš€ ç«‹å³æµ‹è¯•

**è®¿é—®ï¼šhttp://localhost:3000**

**âš ï¸ è®°å¾—å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ï¼**
- **Mac**ï¼š`Cmd + Shift + R`
- **Windows**ï¼š`Ctrl + Shift + R`

---

## ğŸ’¡ å¦‚æœé‡åˆ°é—®é¢˜

### æ¸…ç†å’Œé‡å¯

```bash
# æ¸…é™¤ç¼“å­˜
rm -rf .next

# é‡å¯æœåŠ¡å™¨
npm run dev
```

### æµè§ˆå™¨æ¸…ç†

```
1. F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. Application â†’ Clear site data
3. å¼ºåˆ¶åˆ·æ–°
```

### æ£€æŸ¥è§’è‰²æ•°æ®

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
const data = localStorage.getItem('dnd-character-storage');
console.log(JSON.parse(data));

// æŸ¥çœ‹ skills æ•°ç»„
const parsed = JSON.parse(data);
console.log(parsed.state.currentCharacter.skills);
```

---

**æŠ€èƒ½é€‰æ‹©ç°åœ¨å®Œå…¨æ­£å¸¸ï¼å»åˆ›å»ºä½ çš„è§’è‰²å§ï¼** ğŸ²âš”ï¸
