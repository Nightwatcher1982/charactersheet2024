# D&D 2024 角色卡创建工具 - 项目说明

## 📋 项目概述

这是一个完整的、功能丰富的龙与地下城 2024 版规则角色卡创建工具，采用现代 Web 技术栈构建。

### 核心功能

✅ **引导式角色创建** - 8 步完整流程
✅ **12 个职业** - 包含所有核心职业和详细说明
✅ **9 个物种** - 精灵、矮人、人类等（2024 版术语）
✅ **10 个背景** - 士兵、学者、贵族等
✅ **属性系统** - 标准数组和手动输入
✅ **18 个技能** - 完整的技能选择系统
✅ **装备系统** - 武器、护甲、冒险装备
✅ **PDF 导出** - 一键导出打印版角色卡
✅ **本地存储** - 自动保存，支持多角色
✅ **移动端优化** - 完美适配手机和平板
✅ **响应式设计** - 适配所有屏幕尺寸

## 🏗️ 技术架构

### 前端框架
- **Next.js 14**：React 框架，使用 App Router
- **TypeScript**：类型安全的 JavaScript
- **React 18**：现代化的 UI 库

### 样式和设计
- **Tailwind CSS**：实用优先的 CSS 框架
- **Lucide React**：现代化的图标库
- **自定义组件**：可复用的 UI 组件

### 状态管理
- **Zustand**：轻量级状态管理
- **Persist 中间件**：自动持久化到 localStorage

### PDF 生成
- **jsPDF**：PDF 生成库
- **html2canvas**：HTML 转 Canvas（备用方案）

## 📁 项目结构

```
5r character sheet/
├── app/                          # Next.js App Router
│   ├── page.tsx                 # 首页（角色列表）
│   ├── layout.tsx               # 根布局
│   ├── globals.css              # 全局样式
│   └── create/                  # 角色创建页面
│       └── page.tsx             # 创建向导主页面
│
├── components/                   # React 组件
│   └── steps/                   # 创建步骤组件
│       ├── StepBasicInfo.tsx   # 步骤 1：基本信息
│       ├── StepClass.tsx        # 步骤 2：选择职业
│       ├── StepSpecies.tsx      # 步骤 3：选择物种
│       ├── StepBackground.tsx   # 步骤 4：选择背景
│       ├── StepAbilities.tsx    # 步骤 5：分配属性
│       ├── StepSkills.tsx       # 步骤 6：选择技能
│       ├── StepEquipment.tsx    # 步骤 7：选择装备
│       └── StepReview.tsx       # 步骤 8：确认完成
│
├── lib/                          # 工具函数和数据
│   ├── dnd-data.ts              # DND 2024 规则数据
│   ├── character-store.ts       # Zustand 状态管理
│   └── pdf-generator.ts         # PDF 生成功能
│
├── public/                       # 静态资源
│
├── package.json                  # 项目配置
├── tsconfig.json                # TypeScript 配置
├── tailwind.config.js           # Tailwind 配置
├── next.config.js               # Next.js 配置
├── README.md                     # 项目说明
├── 使用指南.md                  # 用户使用指南
├── 部署指南.md                  # 部署文档
└── 项目说明.md                  # 本文件
```

## 🎨 设计特点

### 用户体验
- **渐进式引导**：一步步完成角色创建
- **实时反馈**：即时显示计算结果
- **信息提示**：每步都有说明和建议
- **可视化进度**：清晰的进度条和步骤指示

### 界面设计
- **现代化 UI**：卡片式布局，圆角设计
- **色彩系统**：以红色为主色调（D&D 风格）
- **图标系统**：清晰直观的视觉引导
- **动画效果**：平滑的过渡动画

### 移动端优化
- **触摸友好**：大按钮，易点击
- **响应式布局**：自适应各种屏幕
- **性能优化**：快速加载和渲染

## 📊 数据结构

### 角色数据模型

```typescript
interface Character {
  id: string;                    // 唯一标识
  name: string;                  // 角色名
  class: string;                 // 职业
  species: string;               // 物种
  background: string;            // 背景
  level: number;                 // 等级
  abilities: Ability;            // 六大属性
  alignment: string;             // 阵营
  hitPoints: number;             // 生命值
  armorClass: number;            // 护甲等级
  skills: string[];              // 技能列表
  proficiencies: string[];       // 熟练项
  equipment: string[];           // 装备
  spells: string[];              // 法术
  features: string[];            // 特性
  backstory: string;             // 背景故事
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 存储方式
- 使用 localStorage 存储
- JSON 格式序列化
- Zustand persist 中间件自动同步

## 🔄 工作流程

### 角色创建流程

```
首页
  ↓ 点击"创建新角色"
步骤 1: 基本信息 → 输入名字、等级、阵营
  ↓
步骤 2: 选择职业 → 12 个职业选项
  ↓
步骤 3: 选择物种 → 9 个物种选项
  ↓
步骤 4: 选择背景 → 10 个背景选项
  ↓
步骤 5: 分配属性 → 六大属性分配
  ↓
步骤 6: 选择技能 → 技能熟练选择
  ↓
步骤 7: 选择装备 → 武器、护甲、装备
  ↓
步骤 8: 确认完成 → 审核并导出
  ↓
保存并返回首页
```

### 编辑流程

```
首页
  ↓ 点击"编辑"
重新进入创建向导（保留原数据）
  ↓ 修改任意步骤
保存更新
```

### 导出流程

```
角色列表/审核页面
  ↓ 点击"导出 PDF"
生成 PDF（jsPDF）
  ↓
浏览器下载
```

## 🎯 核心功能实现

### 1. 状态管理（Zustand）

```typescript
// 全局状态
- characters: Character[]        // 所有角色
- currentCharacter: Character    // 当前编辑的角色
- currentStep: number            // 当前步骤

// 操作方法
- createNewCharacter()           // 创建新角色
- updateCurrentCharacter()       // 更新当前角色
- saveCharacter()                // 保存角色
- loadCharacter()                // 加载角色
- deleteCharacter()              // 删除角色
```

### 2. PDF 生成

```typescript
// 使用 jsPDF 生成
- 页面布局（A4）
- 字体和样式设置
- 内容分段排列
- 自动分页
- 页脚信息
- 下载功能
```

### 3. 本地存储

```typescript
// Zustand persist 中间件
{
  name: 'dnd-character-storage',  // localStorage key
  storage: localStorage,           // 存储引擎
  serialize: JSON.stringify,       // 序列化
  deserialize: JSON.parse,         // 反序列化
}
```

## 📱 响应式断点

```css
/* Tailwind 默认断点 */
sm: 640px   // 小型设备
md: 768px   // 中型设备（平板）
lg: 1024px  // 大型设备（桌面）
xl: 1280px  // 超大型设备
2xl: 1536px // 超超大型设备
```

## 🚀 性能优化

### 已实现优化
- ✅ 代码分割（Next.js 自动）
- ✅ 组件懒加载
- ✅ 图片优化（Next.js Image）
- ✅ CSS 优化（Tailwind purge）
- ✅ 树摇优化（webpack）
- ✅ 服务端渲染（SSR/SSG）

### 可进一步优化
- [ ] Service Worker（PWA）
- [ ] 预加载关键资源
- [ ] 虚拟滚动（长列表）
- [ ] Web Workers（PDF 生成）

## 🔐 安全性

### 当前安全措施
- ✅ 无后端依赖（纯前端）
- ✅ 本地存储数据
- ✅ 无敏感信息收集
- ✅ HTTPS 部署（推荐）

### 注意事项
- ⚠️ 数据存储在浏览器本地
- ⚠️ 清除浏览器数据会丢失角色
- ⚠️ 不支持跨设备同步

## 📈 未来扩展方向

### 功能扩展
- [ ] 云端同步（Firebase/Supabase）
- [ ] 账号系统
- [ ] 角色分享功能
- [ ] 更多职业子类
- [ ] 法术数据库
- [ ] 战斗计算器
- [ ] 角色成长追踪
- [ ] 多语言支持

### 技术升级
- [ ] PWA 支持
- [ ] 离线使用
- [ ] 更丰富的 PDF 模板
- [ ] 图片上传（角色头像）
- [ ] 暗黑模式
- [ ] 动画效果增强

## 🧪 测试建议

### 功能测试
```
✓ 创建新角色
✓ 编辑现有角色
✓ 删除角色
✓ 导出 PDF
✓ 保存和加载
✓ 所有步骤的数据输入
✓ 移动端适配
```

### 浏览器测试
```
✓ Chrome（桌面/移动）
✓ Safari（桌面/移动）
✓ Firefox
✓ Edge
```

### 设备测试
```
✓ iPhone（各种尺寸）
✓ Android 手机
✓ iPad/平板
✓ 桌面（各种分辨率）
```

## 📚 学习资源

### D&D 规则
- [D&D 官方网站](https://www.dndbeyond.com/)
- [5E 中文翻译](https://5echm.kagangtuya.top/)
- Player's Handbook 2024

### 技术文档
- [Next.js 文档](https://nextjs.org/docs)
- [React 文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [TypeScript 文档](https://www.typescriptlang.org/docs/)

## 🤝 贡献指南

### 代码规范
- 使用 TypeScript
- 遵循 ESLint 规则
- 使用函数式组件
- 添加必要的注释

### 提交规范
```
feat: 新功能
fix: 修复 bug
docs: 文档更新
style: 代码格式
refactor: 重构
test: 测试
chore: 构建/工具
```

## 📞 联系和支持

这是一个开源学习项目，欢迎提出建议和反馈！

---

**D&D 和龙与地下城是 Wizards of the Coast 的注册商标。**
**本项目为非官方工具，仅供学习和娱乐使用。**
