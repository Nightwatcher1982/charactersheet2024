# 职业资料改动清单（12 职业完整分析）

本文档基于 `docs/DND资料/` 下 12 个职业 Markdown 的完整阅读，列出**数据层**与**升级/弹窗**所需改动，便于按项实现。

---

## 一、德鲁伊 Druid

### 1.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1 | 原初职能 Primal Order | **选择**：术师 Magician / 卫士 Warden（影响戏法数、护甲等）→ 存 `classFeatureChoices.divineOrder` 或 `primalOrder` |
| 1 | 施法 | 创建时选戏法、准备法术；升级时可选替换戏法、新准备法术 |
| 2 | 荒野变形·已知形态 | 选 4 种野兽形态（推荐鼠/乘用马/蜘蛛/狼）→ 可存 `classFeatureChoices.wildShapeForms` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 ASI 步骤 |
| 7 | 元素之怒 Elemental Fury | **选择**：强力施法 / 原力蛮击 → 存 `classFeatureChoices.elementalFury` |
| 15 | 元素神威 | 沿用 7 级选择 |

### 1.2 子职业·大地结社 Circle of the Land

| 等级 | 内容 | 改动项 |
|------|------|--------|
| 3 | **大地结社法术**（按地形） | **弹窗**：选择地形（荒漠/极地/温带/热带）→ 存 `classFeatureChoices.landTerrain`；根据地形 + 等级自动追加法术到角色 |
| 3/5/7/9 | 结社法术表 | **数据**：`subclass-spells` 表，key = `druid-land-{terrain}`，value = 各等级法术 id 列表（见下） |

**大地结社法术表（需入库）**

- 荒漠 Arid：3→火焰箭/燃烧之手/朦胧术；5→火球术；7→枯萎术；9→石墙术  
- 极地 Polar：3→冷冻射线/云雾术/定身类人；5→雪雨暴；7→冰风暴；9→寒冰锥  
- 温带 Temperate：3→电爪/睡眠术/迷踪步；5→闪电束；7→行动自如；9→树跃术  
- 热带 Tropical：3→酸液飞溅/蛛网术/致病射线；5→臭云术；7→变形术；9→疫病虫群  

### 1.3 子职业·月亮结社 Circle of the Moon

| 等级 | 内容 | 改动项 |
|------|------|--------|
| 3/5/7/9 | **月亮结社法术** | **数据**：子职业法术表 `druid-moon`；**逻辑**：选子职后，升级到 3/5/7/9 时自动将对应法术加入角色准备列表 |

**月亮结社法术表**：3→点点星芒/疗伤术/月华之光；5→咒唤兽群；7→月光涌泉；9→群体疗伤术  

### 1.4 子职业·海洋结社 Circle of the Sea

| 等级 | 内容 | 改动项 |
|------|------|--------|
| 3/5/7/9 | **海洋结社法术** | **数据**：`druid-sea`；**逻辑**：同月亮结社，按等级自动追加 |

**海洋结社法术表**：3→冷冻射线/云雾术/雷鸣波/造风术/粉碎音波；5→闪电束/水下呼吸；7→操控水体/冰风暴；9→咒唤元素/定身怪物  

### 1.5 子职业·星辰结社 Circle of the Stars

| 等级 | 内容 | 改动项 |
|------|------|--------|
| 3 | 星图·形态 | 可选 1d6 或自选星图形态（仅展示用，可不做选择存储） |
| 3 | 星图 | 始终准备 神导术、光导箭（可自动加入） |
| 无 | 无子职法术表 | 仅固定 2 法术，可写死在特性或单独列表 |

---

## 二、法师 Wizard

### 2.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1 | 施法·法术书 | 创建时 6 道法术入书；升级时 +2 道法师法术入书 → 需「选择新法术」弹窗 |
| 2 | **学者 Scholar** | **选择**：从 奥秘/历史/调查/医药/自然/宗教 中选 1 项已熟练技能获得专精 → 存 `classFeatureChoices.scholarSkill` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |
| 18 | 法术精通 Spell Mastery | **选择**：法术书中 1 道一环（动作）+ 1 道二环，常备且可免费施展 → 存 `classFeatureChoices.spellMastery` |
| 20 | 招牌法术 Signature Spells | **选择**：法术书中 2 道三环 → 存 `classFeatureChoices.signatureSpells` |

### 2.2 子职业·防护师 Abjurer 等（4 学派）

| 等级 | 内容 | 改动项 |
|------|------|--------|
| 3 | **学派免费入书法术** | **数据**：每学派 3 级时 2 道不高于二环的学派法术 id；之后每新环阶 +1 道学派法术（需按环阶配置） |
| 3 | 选学派后 | **逻辑**：将 2 道二环内学派法术自动加入法术书；4/5/6… 级获得新环阶时再自动加 1 道该环学派法术 |

**防护师**：3 级选 2 道≤二环防护学派法术入书；每新环阶 +1 道防护学派。  
**预言师 / 塑能师 / 幻术师**：结构相同，仅学派不同。  

**幻术师 3 级**：额外知晓 次级幻象（若已会则换一道戏法），需在数据或升级逻辑中体现。

---

## 三、吟游诗人 Bard

### 3.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 2/9 | 专精 Expertise | ✅ 已有（选 2 项熟练技能） |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |
| 10 | 魔法奥秘 Magical Secrets | **选择**：从 诗人/牧师/德鲁伊/法师 表选法术准备（数量随表）→ 需「选择新法术」弹窗，可跨职业 |
| 20 | 创生圣言 | 始终准备 律令医疗、律令死亡（自动加入） |

### 3.2 子职业

- **勇气学院**：3 级战斗激励、战争训练（无法术表）。  
- **舞蹈学院**：无子职法术表。  
- **逸闻学院**：3 级附赠熟练（选 3 项技能）→ **弹窗** 选 3 技能；6 级魔法探秘（选 2 道法术，可跨牧师/德鲁伊/法师）→ **弹窗**。  
- **魅心学院**：3 级始终准备 魅惑类人、镜影术；6 级始终准备 命令术 → **数据** + 自动追加。  

---

## 四、牧师 Cleric

### 4.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1 | 圣职 Divine Order | **选择**：守护者 / 奇术师 → 存 `classFeatureChoices.divineOrder` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |
| 7 | 受祝击 Blessed Strikes | **选择**：神圣打击 / 强力施法 → 存 `classFeatureChoices.blessedStrikes` |

### 4.2 子职业·领域法术表（4 领域）

| 子职 | 法术表等级 | 改动项 |
|------|------------|--------|
| 生命领域 Life | 3/5/7/9 | **数据**：生命领域法术表；**逻辑**：选领域后按等级自动追加 |
| 光明领域 Light | 3/5/7/9 | 同上 |
| 诡术领域 Trickery | 3/5/7/9 | 同上 |
| 战争领域 War | 3/5/7/9 | 同上 |

**生命领域法术**：3→援助术/祝福术/疗伤术/次等复原术；5→群体治愈真言/回生术；7→生命灵光/防死结界；9→高等复原术/群体疗伤术  
**光明领域**：3→燃烧之手/妖火/灼热射线/识破隐形；5→昼明术/火球术；7→秘法眼/火墙术；9→焰击术/探知术  
**诡术领域**：3→魅惑类人/易容术/隐形术/行动无踪；5→催眠图纹/回避侦测；7→困惑术/任意门；9→支配类人/篡改记忆  
**战争领域**：3→光导箭/虔诚护盾/魔化武器/灵体武器；5→十字军披风/灵体卫士；7→火焰护盾/行动自如；9→定身怪物/钢风斩  

---

## 五、圣武士 Paladin

### 5.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 2 | 战斗风格 Fighting Style | **选择**：防御等 / 受祝福的勇士（2 道牧师戏法）→ 存 `classFeatureChoices.fightingStyle` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |

### 5.2 子职业·誓约法术表（4 誓约）

| 子职 | 法术表等级 | 改动项 |
|------|------------|--------|
| 奉献之誓 Devotion | 3/5/9/13/17 | **数据** + 按等级自动追加 |
| 荣耀之誓 Glory | 3/5/9/13/17 | 同上 |
| 古贤之誓 Ancients | 3/5/9/13/17 | 同上 |
| 复仇之誓 Vengeance | 3/5/9/13/17 | 同上 |

（各表具体法术见文档，此处不逐条列。）

---

## 六、术士 Sorcerer

### 6.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 2 | 超魔法 Metamagic | **选择**：2 个超魔法选项；升级时可替换 1 个；10/17 级再各 +2 个 → 存 `classFeatureChoices.metamagic` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |

### 6.2 子职业·术法表（4 子职）

| 子职 | 法术表等级 | 改动项 |
|------|------------|--------|
| 畸变术法 Aberrant Mind | 3/5/7/9 | **数据** 灵能法术表 + 自动追加 |
| 时械术法 Clockwork Soul | 3/5/7/9 | 时械法术表 + 自动追加 |
| 龙族术法 Draconic | 3/5/7/9 | 龙族法术表 + 自动追加；6 级**选择**伤害类型（强酸/寒冷/火焰/闪电/毒素）→ 存 `classFeatureChoices.draconicElement` |
| 狂野术法 Wild Magic | 无固定法术表 | 仅狂野魔法浪涌等，无子职法术表 |

（各表具体法术见文档。）

---

## 七、武僧 Monk

### 7.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 4/8/12/16 | 属性值提升 | ✅ 已有 |

### 7.2 子职业

- **命流武者**：无子职法术表；3 级操命本事（洞悉、医药、草药工具熟练）可自动加。  
- **暗影武者**：3 级黑暗术（耗功力）、次级幻象戏法 → 可自动加戏法。  
- **四象武者**：3 级戏法 四象法门 → 自动加。  
- **散打武者**：无法术。  

无「子职法术表」需批量入库，仅个别戏法/熟练需在数据或升级时体现。

---

## 八、野蛮人 Barbarian

### 8.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 3 | **原初学识 Primal Knowledge** | **选择**：从野蛮人技能列表再选 1 项熟练 → 存 `classFeatureChoices.primalKnowledgeSkill` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |

### 8.2 子职业

- **狂战士道途**：无法术表。  
- **兽心道途**：3 级动物语者（仪式 野兽知觉、动物交谈）；3 级兽性狂暴选 熊/鹰/狼；6 级兽之形貌选 枭/豹/鲑；14 级兽力威能选 猎鹰/雄狮/角羊 → 多档**选择**，可存 `classFeatureChoices.beastAspect` 等。  
- **世界树道途**：无法术表。  
- **狂热者道途**：无法术表。  

---

## 九、游荡者 Rogue

### 9.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1/6 | 专精 Expertise | ✅ 已有（1 级 2 项，6 级再 2 项） |
| 4/8/10/12/16 | 属性值提升 | ✅ 已有 |

### 9.2 子职业

- **诡术师**：3 级起为施法者，戏法+准备法术表同法师；升级时需「选择新法术/替换戏法」弹窗。无固定子职法术表，仅按诡术师施法表数量选法师法术。  
- **刺客/魂刃/盗贼**：无子职法术表。  

---

## 十、游侠 Ranger

### 10.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 2 | 熟练探险家 Deft Explorer | **选择**：1 项熟练技能获专精；+2 门语言 → 存 `classFeatureChoices.deftExplorerSkill`、语言列表 |
| 2 | 战斗风格 Fighting Style | **选择**：战斗风格 或 德鲁伊教战士（2 道德鲁伊戏法）→ 存 `classFeatureChoices.fightingStyle` |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |
| 9 | 专精 Expertise | **选择**：2 项熟练技能获专精 → 与诗人/游荡者共用专精逻辑，存 `expertiseSkills` |

### 10.2 子职业

| 子职 | 内容 | 改动项 |
|------|------|--------|
| 驯兽师 Beast Master | 3 级原初行侣 | **选择**：大地野兽/海洋野兽/天空野兽 → 存 `classFeatureChoices.primalCompanionType` |
| 妖精漫游者 Fey Wanderer | 3/5/9/13/17 | **数据** 妖精漫游者法术表 + 自动追加；3 级**选择** 欺瞒/表演/游说 之一熟练 |
| 幽域追猎者 Gloom Stalker | 3/5/9/13/17 | **数据** 幽域追猎者法术表 + 自动追加 |
| 猎人 Hunter | 3 级猎杀技艺；7 级防守战术 | **选择**：巨像屠夫/灭族者；冲出重围/多重防御（可短休换）→ 存 `classFeatureChoices.hunterPrey` 等 |

**妖精漫游者法术**：3→魅惑类人；5→迷踪步；9→妖精召唤术；13→任意门；17→假象术  
**幽域追猎者法术**：3→易容术；5→魔绳术；9→恐惧术；13→高等隐形术；17→伪装术  

---

## 十一、战士 Fighter

### 11.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1 | 战斗风格 Fighting Style | **选择**：防御等 → 存 `classFeatureChoices.fightingStyle`；升级时可替换 |
| 4/6/8/12/14/16 | 属性值提升 | ✅ 已有（战士 ASI 多） |

### 11.2 子职业

| 子职 | 内容 | 改动项 |
|------|------|--------|
| 战斗大师 Battle Master | 3/7/10/15 级战技 | **选择**：3 级选 3 个战技；7/10/15 各+2 且可替换 1 个；**数据** 战技列表（id/名称/描述）→ 存 `classFeatureChoices.maneuvers` |
| 勇士 Champion | 无选择表 | — |
| 奥法骑士 Eldritch Knight | 3 级起施法 | 同法师：戏法+准备法术，升级时选新法术；无子职法术表 |
| 灵能武士 Psi Warrior | 灵能骰 | 无法术表，仅数据/描述 |

---

## 十二、魔契师 Warlock

### 12.1 基础职业

| 等级 | 特性/选择 | 需触发的 UI/数据 |
|------|-----------|------------------|
| 1 | **魔能祈唤 Eldritch Invocations** | **选择**：1 个祈唤（如书之魔契）；每级可替换 1 个；2/5/7/9/12/15 级等获得更多 → **弹窗** 选/换祈唤，存 `classFeatureChoices.invocations`（id 数组） |
| 4/8/12/16 | 属性值提升 | ✅ 已有 |
| 11/13/15/17 | **玄奥秘法 Mystic Arcanum** | **选择**：各选 1 道 6/7/8/9 环法术 → ✅ 有 `mysticArcanum` 字段，需升级步骤选法术 |

### 12.2 子职业·宗主法术表（4 宗主）

| 子职 | 法术表等级 | 改动项 |
|------|------------|--------|
| 至高妖精 Archfey | 3/5/7/9 | **数据** + 按等级自动追加 |
| 天界 Celestial | 3/5/7/9 | 同上 |
| 邪魔 Fiend | 3/5/7/9 | 同上 |
| 旧日支配者 Great Old One | 3/5/7/9 | 同上 |

（各表具体法术见魔契师文档。）

### 12.3 魔能祈唤列表（数据）

需将「魔能祈唤选项」全表入库：id、名称、先决（等级、其他祈唤等）、描述。用于升级时展示可选列表及校验先决。

---

## 十三、数据层改动汇总

| 类型 | 说明 | 建议文件/位置 |
|------|------|-------------------------------|
| 子职业法术表 | 德鲁伊(大地按地形)/月亮/海洋；牧师 4 领域；圣武士 4 誓约；术士 4 子职(3 有表)；游侠 妖精漫游者/幽域追猎者；魔契师 4 宗主 | `lib/subclass-spells-data.ts` 或 `*.generated.ts` |
| 法师学派免费入书 | 防护/预言/塑能/幻术：3 级 2 道≤二环 + 每新环阶 1 道 | `lib/wizard-school-spells.ts` 或合并进 subclass-spells |
| 法术名→id 映射 | 中文名/英文名 → spell id（用于上述表） | 从 `spells-data`/`spells-from-docs` 生成，脚本或静态映射 |
| 等级→选择类型 | 每职业每等级：expertise/asi/subclass/terrain/asi/fightingStyle/invocations/mysticArcanum/newSpells/scholar/primalKnowledge 等 | `lib/level-choice-types.ts` 或扩展 `class-level-table` |
| 魔能祈唤选项 | 完整祈唤列表+先决 | `lib/invocation-data.ts` |
| 战技选项（战士） | 战斗大师战技 id/名称/描述 | `lib/maneuvers-data.ts` 或合并进 class-features |

---

## 十四、升级/弹窗改动汇总

| 触发条件 | 行为 | 状态 |
|----------|------|------|
| 专精（诗人 2/9，游荡者 1/6，游侠 9） | 从熟练技能选 N 项 | ✅ 已有 |
| 属性值提升（通用 4/8/12/16/19 等） | +2 单属性或专长 | ✅ 已有 |
| 子职业选择（3 级） | 选子职 | ✅ 已有 |
| 大地结社 3 级 | 选地形（荒漠/极地/温带/热带） | ❌ 需新增 |
| 子职法术表（德/牧/圣/术/侠/魔契等） | 选子职或升级到对应等级时，自动将表中法术加入角色 | ❌ 需新增逻辑 |
| 法师 2 级学者 | 选 1 项技能（奥秘/历史/调查/医药/自然/宗教）获专精 | ❌ 需新增 |
| 法师 3 级学派 | 选学派后，自动 2 道学派法术入书；之后每新环阶自动 +1 道 | ❌ 需新增 |
| 法师 18/20 级 | 法术精通、招牌法术 选法术 | ❌ 需新增 |
| 圣武士/游侠 2 级战斗风格 | 选战斗风格 或 戏法选项 | ❌ 需新增 |
| 野蛮人 3 级原初学识 | 选 1 项野蛮人技能熟练 | ❌ 需新增 |
| 游侠 2 级熟练探险家 | 选 1 项专精 + 2 门语言 | ❌ 需新增 |
| 逸闻学院 3 级 | 选 3 项技能熟练 | ❌ 需新增 |
| 逸闻学院 6 级魔法探秘 | 选 2 道法术（可跨职业） | ❌ 需新增 |
| 术士 2/10/17 级超魔法 | 选/换超魔法选项 | ❌ 需新增 |
| 术士 龙族 6 级 | 选伤害类型（强酸/寒冷/火焰/闪电/毒素） | ❌ 需新增 |
| 德鲁伊 1 级原初职能 | 术师/卫士 | ❌ 需新增 |
| 德鲁伊 7 级元素之怒 | 强力施法/原力蛮击 | ❌ 需新增 |
| 牧师 1 级圣职 | 守护者/奇术师 | ❌ 需新增 |
| 牧师 7 级受祝击 | 神圣打击/强力施法 | ❌ 需新增 |
| 驯兽师 3 级 | 大地/海洋/天空野兽 | ❌ 需新增 |
| 猎人 3/7 级 | 猎杀技艺/防守战术 选项 | ❌ 需新增 |
| 战斗大师 3/7/10/15 级 | 选战技 | ❌ 需新增 |
| 魔契师 1 级及每次升级 | 选/换魔能祈唤 | ❌ 需新增 |
| 魔契师 11/13/15/17 级 | 选玄奥秘法 6/7/8/9 环 | ❌ 需新增（有字段，缺步骤） |
| 施法者每次升级 | 准备法术数增加时「选择新法术」 | ❌ 需新增 |

---

## 十五、实施优先级建议

1. **P0**：子职业法术表数据 + 选子职/升级时自动追加法术；大地结社地形选择弹窗。  
2. **P1**：法师学派免费入书 + 学者专精；魔契师玄奥秘法选法术 + 魔能祈唤选/换。  
3. **P2**：施法者通用「升级时选择新准备/已知法术」弹窗。  
4. **P3**：其余选择（原初职能、圣职、战斗风格、原初学识、熟练探险家、超魔法、战技、猎人/兽心选项等）按需补齐。  

以上为 12 职业完整分析后的改动清单，可直接按「数据层」与「升级/弹窗」两项分工实现。
